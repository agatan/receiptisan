<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">

<svg x="0" y="0" width="909" height="1286" viewBox="0 0 909 1286" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
style="display: block;margin-left: auto;margin-right: auto;">
<defs>
<clipPath id="c_2"><path d="M0,0H909V1286H0Z"/></clipPath>
<clipPath id="c0"><path d="M0,1284.9V0H909V1284.9Z"/></clipPath>

<style type="text/css"><![CDATA[
text { white-space: pre; }
path, image { pointer-events: none; }

.s1_2{
font-size: 17.31px;
font-family: SerifFont-3-1_10;
fill: #000;
}
.s2_2{
font-size: 12.99px;
font-family: SerifFont-3-1_10;
fill: #000;
}
.s3_2{
font-size: 11.73px;
font-family: SerifFont-2-1_v;
fill: #000;
}
.s4_2{
font-size: 13.20px;
font-family: SerifFont-2-1_v;
fill: #000;
}
.s5_2{
font-size: 17.60px;
font-family: SerifFont-2-1_v;
fill: #000;
}
.s6_2{
font-size: 13.20px;
font-family: SerifFont-2-0_q;
fill: #000;
}
.s7_2{
font-size: 16.13px;
font-family: SerifFont-2-1_v;
fill: #000;
}
.s8_2{
font-size: 13.93px;
font-family: SerifFont-2-1_v;
fill: #000;
}
.s9_2{
font-size: 13.93px;
font-family: SerifFont-2-0_q;
fill: #000;
}

.g0_2{
fill: #F0EDEB;
}
.g1_2{
fill: #FFFFFF;
}
.g2_2{
fill: none;
stroke: #000000;
stroke-width: 1.527;
stroke-linecap: butt;
stroke-linejoin: miter;
}
.g3_2{
fill: none;
stroke: #000000;
stroke-width: 1.731;
stroke-linecap: butt;
stroke-linejoin: miter;
}
.g4_2{
fill: none;
stroke: #000000;
stroke-width: 2.597;
stroke-linecap: butt;
stroke-linejoin: miter;
}
.g5_2{
fill: none;
stroke: #000000;
stroke-width: 1.527;
stroke-linecap: butt;
stroke-linejoin: miter;
stroke-dasharray: 3,3;
}
.g6_2{
fill: #FFFFFF;
stroke: #000000;
stroke-width: 1.527;
stroke-linecap: butt;
stroke-linejoin: miter;
}
.g7_2{
fill: none;
stroke: #000000;
stroke-width: 0.733;
stroke-linecap: butt;
stroke-linejoin: miter;
stroke-dasharray: 9,5;
}

]]></style>

</defs>
<path d="M0,0
L0,1286
L909,1286
L909,0 Z " 
fill="#FFFFFF" stroke="none"/>
<g clip-path="url(#c_2)">
    <path d="M909,0H2803.5V2679.7H909ZM0,1286.4H909V3966.1H0Z" class="g0_2"/>
    <path clip-path="url(#c0)" d="M0,0H909V1286.4H0V0Z" class="g1_2"/>
    <path d="M34.4,81.7H454.5V152H34.4V81.7Zm47.3,0v52m174.2,-52v52m47.4,-52v52M34.4,100.1H454.5M34.4,116.9H454.5M434.7,92.4v7.7m0,10.7v6.1m0,10.7v6.1M236,92.4v7.7m0,10.7v6.1m0,10.7v6.1M173.4,92.4v7.7m0,10.7v6.1m0,10.7v6.1M130.6,92.4v7.7m0,10.7v6.1m0,10.7v6.1M679.1,64.9H874.7V81.7H679.1V64.9Z" class="g2_2"/>
    <path d="M619,99.6H826.8v34.6H619V99.6Z" class="g3_2"/>
    <path d="M497.3,81.7H874.7v18.4H497.3V81.7Zm273.5,0v18.4M805.9,64.9V81.7M497.3,100.1H598.1v33.6H497.3V100.1ZM764.7,64.9V81.7M721.9,64.9V81.7m22.9,9.2v9.2M668.4,92.4v7.7M619.5,92.4v7.7M547.7,81.7v18.4" class="g2_2"/>
    <path d="M597.4,99.6H619v34.6H597.4V99.6Z" class="g4_2"/>
    <path d="M34.4,168.8H454.5V1255.1H34.4V168.8Z" class="g2_2"/>
    <path d="M78.7,168.8V1255.1" class="g5_2"/>
    <path d="M34.4,133.7H454.5m0,35.1H874.7V1255.1H454.5V168.8Z" class="g2_2"/>
    <path d="M497.3,168.8V1255.1" class="g5_2"/>
    <path d="M69.5,133.7V152" class="g2_2"/>
    <path d="M26.7,159.7H880.8M61.9,168.8V1255.1M480.5,168.8V1255.1" class="g5_2"/>

    <g clip-path="url(#c0)">
        <!-- 綴紐を通す穴を明ける目印のマル -->
        <path fill-rule="evenodd" d="M56.2,54.1c0,10.2,-14.6,10.2,-14.6,0c0,-10.2,14.6,-10.2,14.6,0" class="g5"/>

        <text x="50"  y="79" class="s1_2">診療報酬明細書</text>

        <text x="252.9" y="79.2" class="s5_2" style="fill: #f00;"><%= to_zenkaku receipt.audit_payer.code %><%= receipt.audit_payer.short_name %></text>
        <%
          # 診療年月
          shinryou_nengetsu = receipt.shinryou_ym.wareki
        %>
        <text x="299.8" y="79" class="s4_2" style="fill: #f00;"><%= shinryou_nengetsu.gengou.name %></text>
        <text x="326.2" y="79" class="s4_2" style="fill: #f00;"><%= to_zenkaku shinryou_nengetsu.year %></text>
        <text x="352"   y="79" class="s2_2">年</text>
        <text x="370.2" y="79" class="s4_2" style="fill: #f00;"><%= to_zenkaku shinryou_nengetsu.month %></text>
        <text x="393"   y="79" class="s2_2">月分</text>
        <text x="430"   y="79" class="s2_2">県番</text>
        <text x="458.2" y="78.5" class="s4_2" style="fill: #f00;"><%= to_zenkaku receipt.prefecture.code %></text>
        <text x="490"   y="79" class="s2_2">医コ</text>
        <text x="520.5" y="78.5" class="s4_2" style="fill: #f00;"><%= to_zenkaku receipt.hospital.code %></text>

        <!-- レセプト種別 -->
        <text x="680.7" y="78.5" class="s4_2" style="fill: #f00;"><%= to_zenkaku receipt.type.tensuu_hyou_type.code %><%= receipt.type.tensuu_hyou_type.name %></text>
        <text x="722.1" y="78.5" class="s4_2" style="fill: #f00;"><%= to_zenkaku receipt.type.main_hoken_type.code %><%= receipt.type.main_hoken_type.name %></text>
        <text x="763"   y="78.5" class="s4_2" style="fill: #f00;"><%= to_zenkaku receipt.type.hoken_multiple_type.code %><%= receipt.type.hoken_multiple_type.name %></text>
        <text x="812"   y="78.5" class="s4_2" style="fill: #f00;"><%= to_zenkaku receipt.type.patient_age_type.code %><%= receipt.type.patient_age_type.name %></text>
    </g>

    <!-- 患者氏名・患者番号 -->
    <g clip-path="url(#c0)">
        <% patient = receipt.patient %>
        <text x="39" y="147.2" dx="0,.2" class="s2_2">氏名</text>
        <text x="66" y="60" class="s4_2" style="fill: #f00;"><%= receipt.patient.id %></text>
        <text x="73.3" y="148.1" class="s4_2" style="fill: #f00;"><%= patient.name %></text>
    </g>

    <!-- 保険 -->
    <g clip-path="url(#c0)">
        <text x="502.1" y="95.8"  class="s2_2">保　険</text>
        <text x="515.1" y="113.6" class="s2_2">記号・番号</text>
        <!-- 保険 -->
        <% if iryou_hoken = receipt.hokens.iryou_hoken %>
            <%
                hokenja_bangou_start_x = 550
                shift_width            = 29
            %>
            <% iryou_hoken.hokenja_bangou.each_char.with_index do | digit, index | %>
                <text x="<%= hokenja_bangou_start_x + index * shift_width %>" y="95.3" class="s7_2" style="fill: #f00;"><%= to_zenkaku digit %></text>
            <% end %>
            <text x="623.1" y="113.7" class="s4_2" style="fill: #f00;"><%= to_zenkaku iryou_hoken.kigou %></text>
            <text x="623.1" y="128.3" class="s4_2" style="fill: #f00;"><%= to_zenkaku iryou_hoken.bangou %></text>
        <% end %>
    </g>

    <!-- 公費 -->
    <g clip-path="url(#c0)">
        <% kouhi_futan_iryous = receipt.hokens.kouhi_futan_iryous %>
        <%
            futansha_start_x  = 81
            jukyuusha_start_x = 300
            shift_width       = 23
        %>

        <text x="52.2"  y="95.2" class="s2_2">－</text>
        <text x="39"    y="112.6" class="s2_2">公負①</text>
        <text x="259.7" y="112.6" class="s2_2">公受①</text>
        <% if kouhi_1st = kouhi_futan_iryous[0] %>
            <% kouhi_1st.futansha_bangou.each_char.with_index do | digit, index | %>
                <text x="<%= futansha_start_x + index * shift_width %>" y="115" class="s7_2" style="fill: #00f;"><%= to_zenkaku digit %></text>
            <% end %>
            <% kouhi_1st.jukyuusha_bangou.each_char.with_index do | digit, index | %>
                <text x="<%= jukyuusha_start_x + index * shift_width %>" y="115" class="s7_2" style="fill: #00f;"><%= to_zenkaku digit %></text>
            <% end %>
        <% end %>

        <text x="272.9" y="95.2" class="s2_2">－</text>
        <text x="39"    y="129.9" class="s2_2">公負②</text>
        <text x="259.7" y="129.9" class="s2_2">公受②</text>
        <% if kouhi_2nd = kouhi_futan_iryous[1] %>
            <% kouhi_2nd.futansha_bangou.each_char.with_index do | digit, index | %>
                <text x="<%= futansha_start_x + index * shift_width %>" y="132" class="s7_2" style="fill: #00f;"><%= to_zenkaku digit %></text>
            <% end %>
            <% kouhi_2nd.jukyuusha_bangou.each_char.with_index do | digit, index | %>
                <text x="<%= jukyuusha_start_x + index * shift_width %>" y="132" class="s7_2" style="fill: #00f;"><%= to_zenkaku digit %></text>
            <% end %>
        <% end %>
    </g>

    <g clip-path="url(#c0)">
        <% tekiyou_page_left.each_with_index do | tekiyou_line, tekiyou_index | %>
            <% tekiyou_y = 183 + 15 * tekiyou_index %>
            <!-- 診療識別 -->
            <text x="40" y="<%= tekiyou_y %>" class="s8_2" style="fill: #00f;"><%= tekiyou_line.shinryou_shikibetsu %></text>
            <!-- 負担区分 -->
            <text x="67" y="<%= tekiyou_y %>" class="s8_2" style="fill: #00f;"><%= tekiyou_line.futan_kubun %></text>
            <!-- 項目、点数、回数 -->
            <text x="80" y="<%= tekiyou_y %>" class="s8_2" style="fill: #00f;"><%= tekiyou_line.text %></text>
        <% end %>
    </g>

    <text x="498.5" y="187" class="s8_2">１を算定しない理由（処方料）；うんたらかんたらあぐれ </text>
    <text x="498.5" y="205.4" class="s8_2">っしぶ </text>
    <!-- <path d="M498.5,220H872.4" class="g7_2"/> -->

    <text x="458.2" y="187" dx="0,0,0,7" class="s9_2">99 G</text>
</g>

<style type="text/css" ><![CDATA[

@font-face {
    font-family: SerifFont-2-0_q;
    src: local("BIZ UD明朝 Medium");
}

@font-face {
    font-family: SerifFont-2-1_v;
    src: local("BIZ UD明朝 Medium");
}

@font-face {
    font-family: SerifFont-3-1_10;
    src: local("BIZ UD明朝 Medium");
}

]]></style>

</svg>
